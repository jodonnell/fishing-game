# Repository Guidelines

## Project Structure & Module Organization
- `main.js` is the Vite entry point; load shared utilities from `src/` modules and wire PIXI renderers here.
- Group gameplay logic beneath `src/` (e.g., `src/draw/` for rendering helpers) and mirror that tree inside `test/` (such as `test/logic/`) when adding coverage.
- Keep build artifacts and deployed sprites in `assets/`; treat anything regenerated by `npm run build` as disposable.
- `scripts/deploy.sh` force-pushes a `deploy` branch after moving built files, so run it only from a clean main branch.

## Build, Test, and Development Commands
- `npm install` installs PIXI, Jest, Vite, ESLint, and Prettier dependencies; rerun after package updates.
- `npm run dev` launches the Vite dev server; pass `--open` locally to auto-open the browser during manual playtests.
- `npm run build` produces the optimized `dist/` bundle; verify before shipping assets.
- `npm run preview` serves the latest build for quick smoke tests.
- `npm run test` executes Jest suites under `test/`; add `--watch` while iterating.
- `npm run lint` and `npm run prettier` must be clean before opening a PR.

## Coding Style & Naming Conventions
- Follow Prettier defaults: 2-space indentation, semicolons omitted, double quotes in JSON only.
- Use ES module syntax, camelCase for functions and variables, PascalCase for exported classes, and UPPER_SNAKE_CASE for constants shared across modules.
- Place side-effect imports (styles, global setup) at the top, followed by local modules grouped by feature.
- Let ESLint surface language-level issues; resolve warnings the same way you would errors.

## Testing Guidelines
- Write Jest specs beside related logic under `test/feature/yourModule.test.js`; mirror source naming for fast discovery.
- Prefer descriptive `describe` blocks and imperative `it` names (e.g., `it("spawns one fish per lane")`).
- Target game-state transitions and PIXI interactions; include regression assertions when fixing bugs.
- Aim to keep smoke suites (`npm run test`) under a minute; refactor heavy integrations into helper fakes.

## Commit & Pull Request Guidelines
- Match the existing Git history: short, present-tense messages (`Add reel mechanics`, `Fix fish spawn timing`) with optional scope prefixes when helpful.
- Each PR should include a concise summary, linked issue or task ID, validation notes (`npm run test`, `npm run build`), and screenshots or GIFs when UI behavior changes.
- Keep branches up to date with `main`; re-run lint and tests after resolving conflicts to ensure no regressions slip through.
